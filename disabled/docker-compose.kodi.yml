version: "3.9"
services:
  # Media stream service
  kodi:
    image: celedhrim/kodi-server:leia
    container_name: kodi
    restart: unless-stopped
    cpus: 4
    mem_limit: 8G
    environment:
    - PGID=${PGID}
    - PUID=${PUID}
    - TZ=${TZ}
    volumes:
    - ${USER_DIR}/kodi/config:/config/.kodi
    - /mnt/raid/media/movies:/movies:ro
    - /mnt/raid/media/music:/music:ro
    - /mnt/raid/media/series:/series:ro
    expose:
    - 8080 # Web UI
    - 9090 # Websockets
    - 9777/udp # Esall interface
    labels:
    - diun.enable=true
